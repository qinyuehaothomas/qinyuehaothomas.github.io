<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mixed Scroll-Snap</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="overflow-y-scroll">

      <div class="text-[100px]">SIgma funks lorem ipums</div>
      <div id="Glitch" class="relative" >
        
      <img src="https://www.nippon.com/en/ncommon/contents/japan-topics/601749/601749.jpg" id="base-image"
      class="w-[100px]  object-cover absolute">
      </div>

     <script defer>
      const Glitch=document.getElementById("Glitch")
      url="https://www.nippon.com/en/ncommon/contents/japan-topics/601749/601749.jpg"

      const randint=(n)=>Math.floor(Math.random()*n);

      function slice_img(img_src){
        const FRAGMENTS=20;
        const MAX_FRAGMENT=20;
        Glitch.innerHTML+=`<img src="${img_src}"
        class="w-[30vw]">`

        const {height:imgH, width:imgW}=Glitch.firstElementChild.getBoundingClientRect();
        console.log(imgH,imgW);
        for(let i=0;i<randint(FRAGMENTS)+10;i++){
          let [x,y]=[randint(imgW),randint(imgH)];
          let [w,h]=[ Math.min( imgW-x , randint(MAX_FRAGMENT)*2+2 ),
                    Math.min( imgH-y , randint(MAX_FRAGMENT )+2 )];
        console.log(h,w);

          Glitch.innerHTML+=`<div style="position:absolute;\
          width:${w}px;height:${h}px;
          top:${y}px;left:${x}px;\
          background-image:url('${img_src}');\
          background-size: ${imgW}px ${imgH}px;\
          background-position:-${x}px -${y}px; 
          filter:drop-shadow(1px 1px 1px black);"/>`;
        }

        return
      }
      slice_img(url);

     </script>
</body>
</html> 